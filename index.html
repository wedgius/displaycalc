<html>
	<head>
		<title>Display Calculator</title>
		
		<link rel="stylesheet" href="default.css" />
		
		<script src="jquery-2.2.1.min.js"></script>
	</head>
	<body>
		<!--
			aspect ratio (width:height)
			dimensional width
			pixel width
			dimensional height
			pixel height
			diagonal length
			ppi
		-->
	
	<h1>Display Dimensions & Resolution</h1>
	
	<section id="calc">
		
		
		<div id="fields-left">
			<div id="field-ppu" class="field">
				<input type="text" id="ppu" value="" />
				<label for="ppu">px per unit</label>
			</div>
		</div>
		
		<div id="display-container">
			<div id="display">
				<div id="display-diagonal"></div>
				<div id="field-diagonal" class="field">
					<input type="text" id="diagonal-length" value="15.4" />
					<label for="diagonal-length">Diagonal</label>
				</div>
			</div>
		</div>
		
		<div id="fields-right">
			<div id="field-height" class="field">
				<input type="text" id="height" value="9" />
				<label for="height">Height</label>
			</div>
			
			<div id="field-pixel-height" class="field">
				<input type="text" id="pixel-height" value="1800" />
				<label for="pixel-height">Height (px)</label>
			</div>
		</div>
		
		<div id="fields-bottom">
			<div id="field-width" class="field">
				<input type="text" id="width" value="16" />
				<label for="width">Width</label>
			</div>
			
			<div id="field-pixel-width" class="field">
				<input type="text" id="pixel-width" value="2880" />
				<label for="pixel-width">Width (px)</label>
			</div>
		</div>
		
<!--
		<div id="field-ratio">
			<input type="text" id="ratio-width" value="16" /><span id="ratio-colon">:</span><input type="text" id="ratio-height" value="9" />
			<label>Ratio</label>
		</div>
-->
		
	</section>
	
	<script type="text/javascript">
		
var width = 13.06;
var height = 8.16;
var pixelWidth = 2880;
var pixelHeight = 1800;
// var ratio = width / height;


var diagonal = function()
{
	return Math.sqrt(Math.pow(width, 2.0) + Math.pow(height, 2.0));
}

var baseAngle = function()
{
	return Math.acos(height / diagonal()) * (180 / Math.PI);
}

var ppu = function()
{
	var pixelDiagonal = Math.sqrt(Math.pow(pixelWidth, 2.0) + Math.pow(pixelHeight, 2.0));
	return pixelDiagonal / diagonal();
}

$(function()
{
	update();
});

$("#width").change(function()
{
	var formWidth = parseFloat($("#width").val());
	
	if (formWidth > 0.0)
	{
		width = formWidth;
		
		var ratio = width / height;
		pixelWidth = pixelHeight * ratio;
		
		update();
	}
	else
	{
		$("#width").val(width);
	}
});
		
$("#height").change(function()
{
	var formHeight = parseFloat($("#height").val());
	
	if (formHeight > 0.0)
	{
		height = formHeight;
		
		var ratio = height / width;
		pixelHeight = pixelWidth * ratio;
		
		update();
	}
	else
	{
		$("#height").val(height);
	}
});

$("#pixel-width").change(function()
{
	var formWidth = parseFloat($("#pixel-width").val());
	
	if (formWidth > 0.0)
	{
		pixelWidth = formWidth;
		
		var ratio = pixelWidth / pixelHeight;
		width = height * ratio;
		
		update();
	}
	else
	{
		$("#pixel-width").val(pixelWidth);
	}
});

$("#pixel-height").change(function()
{
	var formHeight = parseFloat($("#pixel-height").val());
	
	if (formHeight > 0.0)
	{
		pixelHeight = formHeight;
		
		var ratio = pixelHeight / pixelWidth;
		height = width * ratio;
		
		update();
	}
	else
	{
		$("#pixel-height").val(pixelHeight);
	}
});

$("#ppu").change(function()
{
	var formPPU = parseFloat($("#ppu").val());
	
	if (formPPU > 0.0)
	{
/*
		pixelWidth = width * formPPU;
		pixelHeight = height * formPPU;
*/
		
		width = pixelWidth / formPPU;
		height = pixelHeight / formPPU;
		
		update();
	}
	else
	{
		$("#ppu").val(ppu);
	}
})

$("#diagonal-length").change(function()
{
	var formDiagonal = parseFloat($("#diagonal-length").val());
	
	if (formDiagonal > 0.0)
	{
		var angle = baseAngle();
		height = Math.cos(angle * (Math.PI / 180)) * formDiagonal;
		width = Math.sqrt(Math.pow(formDiagonal, 2) - Math.pow(height, 2));
		
		var per = ppu();
		pixelWidth = width * per;
		pixelHeight = height * per;
		
		update();
	}
	else
	{
		$("#diagonal-length").val(diagonal);
	}
});

function update()
{
	updateValues();
	updateDisplayBox();
	updateDiagonalSkew();
}

function updateValues()
{
	$("#width").val(width.toFixed(2));
	$("#height").val(height.toFixed(2));
	$("#pixel-width").val(Math.round(pixelWidth));
	$("#pixel-height").val(Math.round(pixelHeight));
	$("#diagonal-length").val(diagonal().toFixed(2));
	$("#ppu").val(ppu().toFixed(2));
}

function updateDisplayBox()
{
	var boxWidth = 100.0;
	var boxHeight = 100.0;
	var horizontalMargin = 0.0;
	var verticalMargin = 0.0;
	var marginString = "";
	
// 	console.log("width: " + width + " height: " + height);
	if (width > height)
	{
		boxHeight *= height / width;
// 		console.log(height + "/" + width + " = " + boxHeight);
		verticalMargin = (100.0 - boxHeight) / 2.0;
	}
	else if (height > width)
	{
		boxWidth *= width / height;
// 		console.log(width + "/" + height + " = " + boxWidth);
		horizontalMargin = (100.0 - boxWidth) / 2.0;
	}
	
	marginString = verticalMargin + "% " + horizontalMargin + "%";	
	
	$("#display").css({"width": boxWidth + "%", "height": boxHeight + "%", "margin": marginString})
}

function updateDiagonalSkew()
{	
	$("#display-diagonal").css({"transform": "skewX(-" + baseAngle() + "deg)"});
}
		
	</script>
	
	</body>
</html>
